// Copyright 2023 LiveKit, Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

syntax = "proto3"; 

package livekit;
option go_package = "github.com/livekit/protocol/livekit";
option csharp_namespace = "LiveKit.Proto";
option ruby_package = "LiveKit::Proto";

import "google/protobuf/timestamp.proto";
import "logger/options.proto";

service TextService {
  // Create a new text session
  rpc CreateTextSession(CreateTextSessionRequest) returns (CreateTextSessionResponse);
  // Delete an existing text session
  rpc DeleteTextSession(DeleteTextSessionRequest) returns (DeleteTextSessionResponse);
}

message TextSession {
  string id = 1;
  string metadata = 2 [
    (logger.redact) = true,
    (logger.redact_format) = "<redacted ({{ .Size }} bytes)>"
  ];
  uint32 ttl = 3;
  string agent_endpoint = 4;
  google.protobuf.Timestamp created_at = 5;
}

message CreateTextSessionRequest {
  string agent_endpoint = 1;
  string metadata = 2 [
    (logger.redact) = true,
    (logger.redact_format) = "<redacted ({{ .Size }} bytes)>"
  ];
  uint32 ttl = 3;
}

message CreateTextSessionResponse {
  TextSession session = 1;
}

message DeleteTextSessionRequest {
  string id = 1;
}

message DeleteTextSessionResponse {
}
