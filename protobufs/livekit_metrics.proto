syntax = "proto3";

package livekit;
option go_package = "github.com/livekit/protocol/livekit";
option csharp_namespace = "LiveKit.Proto";
option ruby_package = "LiveKit::Proto";


message MetricsBatch {
  repeated TimeSeriesMetric time_series = 1;
  repeated AnnotationMetric annotations = 2;
}

message TimeSeriesMetric {
  // Metric name, e.g., "speech_probability"
  string label = 1;
  // optional participant identity
  string participant_identity = 2;
  // optional track sid
  string track_sid = 3;
  // if track_sid is set, timestamp represents the RTP timestamp
  int64 start_timestamp = 4; // samples
  // if track_sid is set, timestamp represents the RTP timestamp
  int64 end_timestamp = 5;
  // list of samples between start_timestamp and end_timestamp
  repeated MetricSample samples = 6;
}

message MetricSample {
  int64 timestamp = 1;
  float value = 2;
}

message AnnotationMetric {
  // Metric name e.g "assistant_interrupted", "speaking"
  string label = 1;
   // optional participant identity
  string participant_identity = 2;
  // optional track sid
  string track_sid = 3;
  // if track_sid is set, timestamp represents the RTP timestamp
  int64 start_timestamp = 4;
   // optional duration of an event
  int64 end_timestamp = 5;
  // optional metadata
  string metadata = 6;
}